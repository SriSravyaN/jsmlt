!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){if(!Array.isArray(t))return[];var e=o(t[0]);return e.unshift(t.length),e}function i(t,e,n){for(var r=[],o=0;o<n;o+=1)r.push(t+o*((e-t)/(n-1)));return r}function a(t,e){return[].concat(r(Array(t))).map(function(){return e})}function u(t,e){return 1===t.length?a(t[0],e):[].concat(r(Array(t[0]))).map(function(){return u(t.slice(1),e)})}function s(t){return a(t,0)}function l(t){return u(t,0)}function f(t,e){return t.map(function(t){return Array.isArray(t)?f(t,e):e})}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(0===t){var i;return(i=[]).concat.apply(i,n)}for(var a=[],u=0;u<n[0].length;u+=1)!function(e){a.push(c.apply(void 0,[t-1].concat(r(n.map(function(t){return t[e]})))))}(u);return a}function h(t,e,n){for(var r=n.slice(),o=0;o<e-1;o+=1)r=c(t,r,n);return r}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[[1,1]],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[0,0]],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t.slice();if(!r.length)for(var a=0;a<e.length;a+=1)r.push(a);for(var s=0;s<r.length;s+=1){var l=r[s],f=o(i),h=0,p=0;Array.isArray(e[s])?(h=e[s][0],p=e[s][1]):(h=e[s],p=e[s]);var d=0,g=0;Array.isArray(n[s])?(d=n[s][0],g=n[s][1]):(d=n[s],g=n[s]);var b=f.slice(),v=f.slice();b[l]=h,v[l]=p;i=c(l,u(b,d),i,u(v,g))}return i}function d(t,e){return t.reduce(function(t,n,r){return t+n*e[r]},0)}function g(t){return Math.sqrt(d(t,t))}function b(t,e){return t.map(function(t,n){return t+e[n]})}function v(t,e){return t.map(function(t){return e*t})}function y(t){return t.reduce(function(t,e){return t+(Array.isArray(e)?y(e):e)},0)}function m(t){return t.map(function(t){return Array.isArray(t)?m(t):Math.abs(t)})}function w(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(function(t){return t.slice()}),o=r[0].length;o>0;){for(var i=Math.floor(Math.random()*o),a=0;a<r.length;a+=1){var u=r[a][o-1];r[a][o-1]=r[a][i],r[a][i]=u}o-=1}return r}function k(t){var e;return(e=[]).concat.apply(e,r(t.map(function(t){return Array.isArray(t)?k(t):t})))}function _(t){for(var e=l([t[0].length,t.length]),n=0;n<t.length;n+=1)for(var r=0;r<t[0].length;r+=1)e[r][n]=t[n][r];return e}function O(t,e){return[_(h(1,e.length,t)),h(1,t.length,e)]}function x(t,e,n){var r=t.slice();return r[e[0]]=1===e.length?n:x(t[e[0]],e.slice(1),n),r}function C(t,e){for(var n=k(t),r=l(e),o=s(e.length),i=o.length-1,a=0,u=!1;!u;)for(r=x(r,o,n[a]),i=o.length-1,o[i]+=1,a+=1;o[i]===e[i];)0===i&&(u=!0),o[i-1]+=1,o[i]=0,i-=1;return r}function M(t,e,n){if(1===e.length)return t.slice(e[0],e[0]+n[0]);for(var r=[],o=e[0];o<e[0]+n[0];o+=1)r.push(M(t[o],e.slice(1),n.slice(1)));return r}function j(t,e){return 1===e.length?t[e]:j(t[e[0]],e.slice(1))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={linspace:i,zeroVector:s,valueVector:a,zeros:l,full:u,fill:f,pad:p,getShape:o,dot:d,norm:g,sum:b,scale:v,internalSum:y,abs:m,permuteRows:w,flatten:k,concatenate:c,transpose:_,meshGrid:O,repeat:h,reshape:C,subBlock:M,setArrayElement:x,getArrayElement:j}},function(t,e,n){"use strict";function r(t,e,n){for(var r=[],o=e;o<=n;o+=1){var i=(o%t.length+t.length)%t.length;r.push(t[i])}return r}function o(t){return t.map(function(t,e){return[t,e]})}function i(t){var e=[],n={},r=0;return t.forEach(function(t){void 0===n[t]&&(n[t]=r,e.push([t,0]),r+=1),e[n[t]][1]+=1}),e}function a(t){return 0===t.length?null:o(t).reduce(function(t,e){return e[0]>t[0]?e:t})[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.default={wrapSlice:r,zipWithIndex:o,valueCounts:i,argMax:a}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.labelsClassIndex={},this.classIndicesLabel=[],this.numLabels=0}return o(t,[{key:"resetLabelsClassIndex",value:function(){this.labelsClassIndex={},this.classIndicesLabel=[],this.numLabels=0}},{key:"getOrCreateLabelClassIndex",value:function(t){var e=t.toString();return void 0===this.labelsClassIndex[e]&&(this.labelsClassIndex[e]=this.numLabels,this.classIndicesLabel.push(e),this.numLabels+=1),this.labelsClassIndex[e]}},{key:"getLabelClassIndex",value:function(t){var e=t.toString();return void 0===this.labelsClassIndex[e]?-1:this.labelsClassIndex[t]}},{key:"getClassIndexLabel",value:function(t){return void 0===this.classIndicesLabel[t]?-1:this.classIndicesLabel[t]}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(){r(this,t)};e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),f=n(0),c=(r(f),function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.training={features:[],labels:[]},t}return a(e,t),u(e,[{key:"loadTrainingData",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.length!==e.length)throw new Error("Number of data points should match number of labels.");var o=Array.from(new Set(e));if(o.length>2)throw new Error("No more than 2 unique class labels should be passed to a BinaryClassifier. Two class labels are distinct if their string representations are inequal.");null!==r&&o.includes(r)&&2===o.length&&this.getOrCreateLabelClassIndex(o[1-o.indexOf(r)]),this.training.features=t,this.training.labels=e.map(function(t){return n.getOrCreateLabelClassIndex(t)})}}]),e}(l.default));e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=r(s),f=n(3),c=r(f),h=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"apply",value:function(t,e){return l.default.dot(t,e)}}]),e}(c.default);e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(4),f=r(l),c=n(0),h=r(c),p=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.weights=null,t}return a(e,t),s(e,[{key:"initializeWeights",value:function(){this.weights=h.default.zeroVector(1+this.training.features[0].length)}},{key:"getClassIndexSign",value:function(t){return 2*t-1}},{key:"getSignClassIndex",value:function(t){return(t+1)/2}},{key:"train",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==t&&null!==e&&this.loadTrainingData(t,e,n),this.weightsIncrement=1/0,this.initializeWeights();for(var r=[],o=0;;){var i=this.trainIteration(),a=u(i,2),s=a[0],l=a[1];if(r.push(s),l.reduce(function(t,e){return t+Math.abs(e)},0)<1e-4||o>100)break;o+=1}}},{key:"trainIteration",value:function(){for(var t=h.default.zeroVector(this.weights.length),e=0,n=h.default.permuteRows(this.training.features,this.training.labels),r=u(n,2),o=r[0],i=r[1],a=0;a<this.training.features.length;a+=1){var s=this.getClassIndexSign(i[a]),l=o[a].slice();l.unshift(1);s*h.default.dot(l,this.weights)<=0&&(e+=1,t=h.default.sum(t,h.default.scale(l,s)))}return this.weightsIncrement=h.default.scale(t,.01/this.training.features.length),this.weights=h.default.sum(this.weights,this.weightsIncrement),[e,t]}},{key:"checkConvergence",value:function(){return h.default.internalSum(h.default.abs(this.weightsIncrement))<1e-4}},{key:"predict",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={output:"classLabels"},r=Object.assign({},n,e),o=[],i=Math.sqrt(h.default.dot(this.weights,this.weights)),a=0;a<t.length;a+=1){var u=t[a].slice();u.unshift(1);var s=h.default.dot(u,this.weights);"raw"===r.output||("normalized"===r.output?s/=i:o.push(this.getClassIndexLabel(this.getSignClassIndex(s>0?1:-1)))),o.push(s)}return o}}]),e}(f.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(4),f=r(l),c=n(0),h=r(c),p=n(8),d=r(p),g=n(5),b=r(g),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r={C:100,kernel:null,convergenceNumPasses:10,numericalTolerance:1e-4},a=Object.assign({},r,t);return n.C=a.C,n.kernel=null===a.kernel?new b.default:a.kernel,n.numericalTolerance=a.numericalTolerance,n.convergenceNumPasses=a.convergenceNumPasses,n.supportVectors=[],n.kernelCache=null,n.kernelCacheStatus=null,n}return a(e,t),s(e,[{key:"getClassIndexSign",value:function(t){return 2*t-1}},{key:"getSignClassIndex",value:function(t){return(t+1)/2}},{key:"train",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===t&&null===n||this.loadTrainingData(t,n,r);var o=this.training.features.length;this.alphas=h.default.zeroVector(o),this.b=0,this.kernelCache=h.default.full([o,o],0),this.kernelCacheStatus=h.default.full([o,o],!1);for(var i=0,a=this.training.features,s=this.training.labels.map(function(t){return e.getClassIndexSign(t)});i<this.convergenceNumPasses;){for(var l=0,f=0;f<o;f+=1){var c=this.sampleMargin(a[f])-s[f];if(s[f]*c<-this.numericalTolerance&&this.alphas[f]<this.C||s[f]*c>this.numericalTolerance&&this.alphas[f]>0){var p=d.default.randint(0,o-1);p>=f&&(p+=1);var g=this.sampleMargin(a[p])-s[p],b=this.calculateAlphaBounds(f,p),v=u(b,2),y=v[0],m=v[1];if(Math.abs(m-y)<this.numericalTolerance)continue;var w=this.applyKernel(f,p),k=this.applyKernel(f,f),_=this.applyKernel(p,p),O=2*w-k-_;if(O>=0)continue;var x=this.alphas[p],C=x-s[p]*(c-g)/O;if(C=Math.min(C,m),C=Math.max(C,y),Math.abs(C-x)<this.numericalTolerance)continue;var M=this.alphas[f],j=M+s[f]*s[p]*(x-C);this.alphas[p]=C,this.alphas[f]=j;var S=this.b-c-s[f]*(j-M)*k-s[p]*(C-x)*w,P=this.b-g-s[f]*(j-M)*w-s[p]*(C-x)*_;C>0&&C<this.C?this.b=P:j>0&&j<this.C?this.b=S:this.b=(S+P)/2,l+=1}}0===l?i+=1:i=0}this.supportVectors=this.alphas.map(function(t){return t>1e-6})}},{key:"sampleMargin",value:function(t){for(var e=this.b,n=0;n<this.training.features.length;n+=1){var r=this.applyKernel(t,n);e+=this.getClassIndexSign(this.training.labels[n])*this.alphas[n]*r}return e}},{key:"applyKernel",value:function(t,e){var n="number"==typeof t&&"number"==typeof e;if(n&&!0===this.kernelCacheStatus[t][e])return this.kernelCache[t][e];var r="number"==typeof t?this.training.features[t]:t,o="number"==typeof e?this.training.features[e]:e,i=this.kernel.apply(r,o);return n&&(this.kernelCache[t][e]=i,this.kernelCacheStatus[t][e]=!0),i}},{key:"calculateAlphaBounds",value:function(t,e){var n=void 0,r=void 0;return this.training.labels[t]===this.training.labels[e]?(n=this.alphas[e]-(this.C-this.alphas[t]),r=this.alphas[e]+this.alphas[t]):(n=this.alphas[e]-this.alphas[t],r=this.alphas[e]+(this.C-this.alphas[t])),n=Math.max(0,n),r=Math.min(this.C,r),[n,r]}},{key:"predict",value:function(t,e){var n=this,r={output:"classLabels"},o=Object.assign({},r,e);return t.map(function(t){var e=n.sampleMargin(t);return"raw"===o.output||"normalized"===o.output||(e=n.getClassIndexLabel(n.getSignClassIndex(e>0?1:-1))),e})}}]),e}(f.default);e.default=v},function(t,e,n){"use strict";function r(t,e){return t+Math.floor((e-t)*Math.random())}Object.defineProperty(e,"__esModule",{value:!0}),e.default={randint:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),f=n(0),c=r(f),h=n(1),p=r(h),d=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.training={features:[],labels:[]},t.classifiers=[],t.listeners=new Map,t}return a(e,t),u(e,[{key:"createClassifier",value:function(t){return null}},{key:"createClassifiers",value:function(){var t=this,e=Array.from(new Set(this.training.labels));this.classifiers=e.map(function(e){return t.createClassifier(e)})}},{key:"trainBatch",value:function(){this.classifiers.forEach(function(t){return t.train()})}},{key:"trainIterative",value:function(){for(var t=Array.from(new Set(this.training.labels)),e=0;e<100&&t.length>0;){var n=t.slice(),r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;this.classifiers[s].trainIteration(),this.classifiers[s].checkConvergence()&&n.splice(n.indexOf(s),1)}}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}t=n,this.emit("iterationCompleted"),e+=1}this.emit("converged")}},{key:"train",value:function(t,e){var n=this;if(t.length!==e.length)throw new Error("Number of data points should match number of labels.");this.training.features=t,this.training.labels=e.map(function(t){return n.getOrCreateLabelClassIndex(t)}),this.createClassifiers()}},{key:"predict",value:function(t){var e=this;if(null===this.weights)throw new Error("Model has to be trained in order to make predictions.");if(t[0].length!==this.training.features[0].length)throw new Error("Number of features of test data should match number of features of training data.");return c.default.transpose(this.classifiers.map(function(e){return e.predict(t,{output:"normalized"})})).map(function(t){return e.getClassIndexLabel(p.default.argMax(t))})}},{key:"addListener",value:function(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}},{key:"removeListener",value:function(t,e){var n=this.listeners.get(t);n&&this.listeners.set(t,n.filter(function(t){return!("function"==typeof t&&t===e)}))}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this.listeners.get(t);return!!o&&(o.forEach(function(t){t.apply(void 0,n)}),!0)}}]),e}(l.default);e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){r(this,t),this.features=e,this.classIndex=null,this.marked=!1}return o(t,[{key:"setClassIndex",value:function(t){this.classIndex=t}},{key:"getClassIndex",value:function(){return this.classIndex}},{key:"setMarked",value:function(t){this.marked=t}},{key:"isMarked",value:function(){return this.marked}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,n){r(this,t),this.canvas=e,this.model=n,this.radius=0,this.steps=0}return i(t,[{key:"updateFromModel",value:function(){var t=o(this.model.features,2);this.x=t[0],this.y=t[1],this.color=this.canvas.getClassColor(this.model.classIndex),this.marked=this.model.isMarked()}},{key:"update",value:function(){this.updateFromModel();var t=Math.min(this.steps/20,.75);this.radius=6*Math.sin(t*Math.PI),this.steps+=1}},{key:"draw",value:function(){var t=this.canvas.canvas.context,e=this.canvas.convertFeaturesToCanvasCoordinates(this.x,this.y),n=o(e,2),r=n[0],i=n[1];t.beginPath(),t.arc(r,i,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill(),t.lineWidth=1,t.strokeStyle="#555",t.stroke(),this.marked&&(t.beginPath(),t.arc(r,i,this.radius+3,0,2*Math.PI,!1),t.lineWidth=1,t.strokeStyle="#555",t.stroke())}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=r(o),a=n(19),u=r(a),s=n(23),l=r(s),f=n(25),c=r(f),h=n(27),p=r(h),d=n(28),g=r(d);e.default={Classification:i.default,Classifier:u.default,Data:l.default,Util:c.default,Math:p.default,UI:g.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),i=r(o),a=n(18),u=r(a),s=n(5),l=r(s),f=n(3),c=r(f);e.default={Boundaries:i.default,GaussianKernel:u.default,LinearKernel:l.default,Kernel:c.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(15),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),l=n(0),f=r(l),c=n(1),h=r(c),p=function(){function t(){o(this,t),this.features=null,this.predictions=null,this.predictionsGrid=null}return a(t,[{key:"calculateClassifierDecisionBoundaries",value:function(t,e){var n=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e[1]:e,o=this.generateFeaturesFromLinSpaceGrid(n,r,[-1,1],[-1,1]),i=t.predict(o),a=f.default.reshape(i,[n,r]);return this.features=o,this.predictions=i,this.predictionsGrid=this.getGridDecisionBoundaries(a),this.predictionsGrid}},{key:"getFeatures",value:function(){return this.features}},{key:"getPredictions",value:function(){return this.predictions}},{key:"getPredictionsGrid",value:function(){return this.predictionsGrid}},{key:"getGridDecisionBoundaries",value:function(t){var e=Array.from(new Set(f.default.flatten(t))),n={},r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n[s]=this.getGridLevelBoundaries(t,s)}}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}},{key:"getGridLevelBoundaries",value:function(t,e){for(var n=[],r=0;r<t.length;r+=1){n.push([]);for(var o=0;o<t.length;o+=1)n[r].push(t[r][o]===e?-2:-1)}for(var i=!0,a=0;a<t.length;a+=1)-1!==n[a][0]&&-1!==n[a][t.length-1]&&-1!==n[0][a]&&-1!==n[t.length-1][a]||(i=!1);i&&(n=f.default.pad(n,[1,1],[-1,-1]));var u=s.isoBands(n,-2,.5),l=!0,c=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value,b=!0,v=!1,y=void 0;try{for(var m,w=g[Symbol.iterator]();!(b=(m=w.next()).done);b=!0){var k=m.value;i?(k[0]=(k[0]-1)/(n.length-3)*2-1,k[1]=(k[1]-1)/(n[0].length-3)*2-1):(k[0]=k[0]/(n.length-1)*2-1,k[1]=k[1]/(n[0].length-1)*2-1)}}catch(t){v=!0,y=t}finally{try{!b&&w.return&&w.return()}finally{if(v)throw y}}}}catch(t){c=!0,h=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw h}}return u}},{key:"smoothContours",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=JSON.parse(JSON.stringify(t));return t.keys().foreach(function(r){for(var o=t[r],i=JSON.parse(JSON.stringify(o)),a=0;a<o.length;a+=1)for(var u=0;u<o[a].length;u+=1)if(!(Math.abs(o[a][u][0])>=1||Math.abs(o[a][u][1])>=1)){for(var s=h.default.wrapSlice(o[a],u-e,u+e),l=(s.length-1)/2,c=0,p=0;p<s.length;p+=1)(Math.abs(s[p][0])>=1||Math.abs(s[p][1])>=1)&&(c=Math.max(c,l-Math.abs(p-l)));c>0&&(s=s.slice(c,s.length+1-c));var d=f.default.flatten(f.default.subBlock(s,[0,0],[s.length,1])),g=f.default.flatten(f.default.subBlock(s,[0,1],[s.length,1]));i[a][u][0]=f.default.internalSum(d)/d.length,i[a][u][1]=f.default.internalSum(g)/g.length}n[r]=i}),n}},{key:"generateFeaturesFromLinSpaceGrid",value:function(t,e,n,r){var o=f.default.linspace(n[0],n[1],t),a=f.default.linspace(r[0],r[1],e),u=f.default.meshGrid(o,a),s=i(u,2),l=s[0],c=s[1],h=f.default.flatten(l),p=f.default.flatten(c);return f.default.concatenate(1,h,p)}}]),t}();e.default=p},function(t,e,n){var r,o,i;/*!
* @license GNU Affero General Public License.
* Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
* v. 1.2.0
* https://github.com/RaumZeit/MarchingSquares.js
*/
!function(a,u){o=[n(16),n(17)],r=u,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t,e){return{isoBands:"function"==typeof t?t:"object"==typeof t&&"function"==typeof t.isoBands?t.isoBands:null,isoContours:"function"==typeof e?e:"object"==typeof e&&"function"==typeof e.isoContours?e.isoContours:null}})},function(t,e,n){var r,o;/*!
* @license GNU Affero General Public License.
* Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
* v. 1.2.0
* https://github.com/RaumZeit/MarchingSquares.js
*/
!function(n,i){r=[],void 0!==(o=function(){return{isoBands:i()}}.apply(e,r))&&(t.exports=o)}(0,function(){function t(t,e,n,i){i=i||{};for(var a=Object.keys(f),u=0;u<a.length;u++){var s=a[u],h=i[s];h=void 0!==h&&null!==h?h:f[s],c[s]=h}c.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var p,d=r(t,e,n);return c.polygons?(c.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),p=l(d)):(c.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),p=o(d)),"function"==typeof c.successCallback&&c.successCallback(p),p}function e(t,e,n){return(t-e)/(n-e)}function n(t){return t.constructor.toString().indexOf("Array")>-1}function r(t,n,r){for(var o=t.length-1,i=t[0].length-1,a={rows:o,cols:i,cells:[]},u=n+Math.abs(r),s=0;s<o;++s){a.cells[s]=[];for(var l=0;l<i;++l){var f=0,c=t[s+1][l],h=t[s+1][l+1],p=t[s][l+1],d=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(d))){f|=c<n?0:c>u?128:64,f|=h<n?0:h>u?32:16,f|=p<n?0:p>u?8:4,f|=d<n?0:d>u?2:1;var g=+f,b=0;if(17===f||18===f||33===f||34===f||38===f||68===f||72===f||98===f||102===f||132===f||136===f||137===f||152===f||153===f){var v=(c+h+p+d)/4;b=v>u?2:v<n?0:1,34===f?1===b?f=35:0===b&&(f=136):136===f?1===b?(f=35,b=4):0===b&&(f=34):17===f?1===b?(f=155,b=4):0===b&&(f=153):68===f?1===b?(f=103,b=4):0===b&&(f=102):153===f?1===b&&(f=155):102===f?1===b&&(f=103):152===f?b<2&&(f=156,b=1):137===f?b<2&&(f=139,b=1):98===f?b<2&&(f=99,b=1):38===f?b<2&&(f=39,b=1):18===f?b>0?(f=156,b=4):f=152:33===f?b>0?(f=139,b=4):f=137:72===f?b>0?(f=99,b=4):f=98:132===f&&(b>0?(f=39,b=4):f=38)}if(0!=f&&170!=f){var y,m,w,k,_,O,x,C;y=m=w=k=_=O=x=C=.5;var M=[];1===f?(w=1-e(n,p,d),C=1-e(n,c,d),M.push(Pt[f])):169===f?(w=e(u,d,p),C=e(u,d,c),M.push(Pt[f])):4===f?(O=1-e(n,h,p),k=e(n,d,p),M.push(jt[f])):166===f?(O=e(u,p,h),k=1-e(u,p,d),M.push(jt[f])):16===f?(_=e(n,p,h),m=e(n,c,h),M.push(Mt[f])):154===f?(_=1-e(u,h,p),m=1-e(u,h,c),M.push(Mt[f])):64===f?(x=e(n,d,c),y=1-e(n,h,c),M.push(At[f])):106===f?(x=1-e(u,c,d),y=e(u,c,h),M.push(At[f])):168===f?(k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),M.push(St[f]),M.push(Pt[f])):2===f?(k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),M.push(St[f]),M.push(Pt[f])):162===f?(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),M.push(St[f]),M.push(Pt[f])):8===f?(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),M.push(Mt[f]),M.push(jt[f])):138===f?(_=1-e(n,h,p),O=1-e(u,h,p),y=1-e(u,h,c),m=1-e(n,h,c),M.push(Mt[f]),M.push(jt[f])):32===f?(_=e(u,p,h),O=e(n,p,h),y=e(n,c,h),m=e(u,c,h),M.push(Mt[f]),M.push(jt[f])):42===f?(C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h),M.push(Et[f]),M.push(At[f])):128===f&&(C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c),M.push(Et[f]),M.push(At[f])),5===f?(O=1-e(n,h,p),C=1-e(n,c,d),M.push(jt[f])):165===f?(O=e(u,p,h),C=e(u,d,c),M.push(jt[f])):20===f?(k=e(n,d,p),m=e(n,c,h),M.push(St[f])):150===f?(k=1-e(u,p,d),m=1-e(u,h,c),M.push(St[f])):80===f?(_=e(n,p,h),x=e(n,d,c),M.push(Mt[f])):90===f?(_=1-e(u,h,p),x=1-e(u,c,d),M.push(Mt[f])):65===f?(w=1-e(n,p,d),y=1-e(n,h,c),M.push(Pt[f])):105===f?(w=e(u,d,p),y=e(u,c,h),M.push(Pt[f])):160===f?(_=e(u,p,h),O=e(n,p,h),C=e(n,d,c),x=e(u,d,c),M.push(Mt[f]),M.push(jt[f])):10===f?(_=1-e(n,h,p),O=1-e(u,h,p),C=1-e(u,c,d),x=1-e(n,c,d),M.push(Mt[f]),M.push(jt[f])):130===f?(k=1-e(n,p,d),w=1-e(u,p,d),y=1-e(u,h,c),m=1-e(n,h,c),M.push(St[f]),M.push(Pt[f])):40===f?(k=e(u,d,p),w=e(n,d,p),y=e(n,c,h),m=e(u,c,h),M.push(St[f]),M.push(Pt[f])):101===f?(O=e(u,p,h),y=e(u,c,h),M.push(jt[f])):69===f?(O=1-e(n,h,p),y=1-e(n,h,c),M.push(jt[f])):149===f?(C=e(u,d,c),m=1-e(u,h,c),M.push(Et[f])):21===f?(C=1-e(n,c,d),m=e(n,c,h),M.push(Et[f])):86===f?(k=1-e(u,p,d),x=1-e(u,c,d),M.push(St[f])):84===f?(k=e(n,d,p),x=e(n,d,c),M.push(St[f])):89===f?(_=1-e(u,h,p),w=e(u,d,p),M.push(Pt[f])):81===f?(_=e(n,p,h),w=1-e(n,p,d),M.push(Pt[f])):96===f?(_=e(u,p,h),O=e(n,p,h),x=e(n,d,c),y=e(u,c,h),M.push(Mt[f]),M.push(jt[f])):74===f?(_=1-e(n,h,p),O=1-e(u,h,p),x=1-e(u,c,d),y=1-e(n,h,c),M.push(Mt[f]),M.push(jt[f])):24===f?(_=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),m=e(n,c,h),M.push(Mt[f]),M.push(Pt[f])):146===f?(_=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),m=1-e(u,h,c),M.push(Mt[f]),M.push(Pt[f])):6===f?(O=1-e(n,h,p),k=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),M.push(jt[f]),M.push(St[f])):164===f?(O=e(u,p,h),k=e(n,d,p),C=e(n,d,c),x=e(u,d,c),M.push(jt[f]),M.push(St[f])):129===f?(w=1-e(n,p,d),C=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c),M.push(Pt[f]),M.push(Et[f])):41===f?(w=e(u,d,p),C=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h),M.push(Pt[f]),M.push(Et[f])):66===f?(k=1-e(n,p,d),w=1-e(u,p,d),x=1-e(u,c,d),y=1-e(n,h,c),M.push(St[f]),M.push(Pt[f])):104===f?(k=e(u,d,p),w=e(n,d,p),x=e(n,d,c),y=e(u,c,h),M.push(Pt[f]),M.push(It[f])):144===f?(_=e(n,p,h),C=e(n,d,c),x=e(u,d,c),m=1-e(u,h,c),M.push(Mt[f]),M.push(At[f])):26===f?(_=1-e(u,h,p),C=1-e(u,c,d),x=1-e(n,c,d),m=e(n,c,h),M.push(Mt[f]),M.push(At[f])):36===f?(O=e(u,p,h),k=e(n,d,p),y=e(n,c,h),m=e(u,c,h),M.push(jt[f]),M.push(St[f])):134===f?(O=1-e(n,h,p),k=1-e(u,p,d),y=1-e(u,h,c),m=1-e(n,h,c),M.push(jt[f]),M.push(St[f])):9===f?(_=1-e(n,h,p),O=1-e(u,h,p),w=e(u,d,p),C=1-e(n,c,d),M.push(Mt[f]),M.push(jt[f])):161===f?(_=e(u,p,h),O=e(n,p,h),w=1-e(n,p,d),C=e(u,d,c),M.push(Mt[f]),M.push(jt[f])):37===f?(O=e(u,p,h),C=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h),M.push(jt[f]),M.push(Et[f])):133===f?(O=1-e(n,h,p),C=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c),M.push(jt[f]),M.push(Et[f])):148===f?(k=e(n,d,p),C=e(n,d,c),x=e(u,d,c),m=1-e(u,h,c),M.push(St[f]),M.push(At[f])):22===f?(k=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),m=e(n,c,h),M.push(St[f]),M.push(At[f])):82===f?(_=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),x=1-e(u,c,d),M.push(Mt[f]),M.push(Pt[f])):88===f?(_=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),x=e(n,d,c),M.push(Mt[f]),M.push(Pt[f])):73===f?(_=1-e(n,h,p),O=1-e(u,h,p),w=e(u,d,p),y=1-e(n,h,c),M.push(Mt[f]),M.push(jt[f])):97===f?(_=e(u,p,h),O=e(n,p,h),w=1-e(n,p,d),y=e(u,c,h),M.push(Mt[f]),M.push(jt[f])):145===f?(_=e(n,p,h),w=1-e(n,p,d),C=e(u,d,c),m=1-e(u,h,c),M.push(Mt[f]),M.push(Et[f])):25===f?(_=1-e(u,h,p),w=e(u,d,p),C=1-e(n,c,d),m=e(n,c,h),M.push(Mt[f]),M.push(Et[f])):70===f?(O=1-e(n,h,p),k=1-e(u,p,d),x=1-e(u,c,d),y=1-e(n,h,c),M.push(jt[f]),M.push(St[f])):100===f?(O=e(u,p,h),k=e(n,d,p),x=e(n,d,c),y=e(u,c,h),M.push(jt[f]),M.push(St[f])):34===f?(0===b?(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)):(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)),M.push(Mt[f]),M.push(jt[f]),M.push(Et[f]),M.push(At[f])):35===f?(4===b?(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)):(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)),M.push(Mt[f]),M.push(jt[f]),M.push(Pt[f]),M.push(At[f])):136===f?(0===b?(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)):(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)),M.push(Mt[f]),M.push(jt[f]),M.push(Et[f]),M.push(At[f])):153===f?(0===b?(_=e(n,p,h),w=1-e(n,p,d),C=1-e(n,c,d),m=e(n,c,h)):(_=1-e(u,h,p),w=e(u,d,p),C=e(u,d,c),m=1-e(u,h,c)),M.push(Mt[f]),M.push(Pt[f])):102===f?(0===b?(O=1-e(n,h,p),k=e(n,d,p),x=e(n,d,c),y=1-e(n,h,c)):(O=e(u,p,h),k=1-e(u,p,d),x=1-e(u,c,d),y=e(u,c,h)),M.push(jt[f]),M.push(At[f])):155===f?(4===b?(_=e(n,p,h),w=1-e(n,p,d),C=1-e(n,c,d),m=e(n,c,h)):(_=1-e(u,h,p),w=e(u,d,p),C=e(u,d,c),m=1-e(u,h,c)),M.push(Mt[f]),M.push(Et[f])):103===f?(4===b?(O=1-e(n,h,p),k=e(n,d,p),x=e(n,d,c),y=1-e(n,h,c)):(O=e(u,p,h),k=1-e(u,p,d),x=1-e(u,c,d),y=e(u,c,h)),M.push(jt[f]),M.push(St[f])):152===f?(0===b?(_=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),m=e(n,c,h)):(_=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),m=1-e(u,h,c)),M.push(Mt[f]),M.push(St[f]),M.push(Pt[f])):156===f?(4===b?(_=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),m=e(n,c,h)):(_=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),C=e(n,d,c),x=e(u,d,c),m=1-e(u,h,c)),M.push(Mt[f]),M.push(Pt[f]),M.push(At[f])):137===f?(0===b?(_=e(u,p,h),O=e(n,p,h),w=1-e(n,p,d),C=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)):(_=1-e(n,h,p),O=1-e(u,h,p),w=e(u,d,p),C=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)),M.push(Mt[f]),M.push(jt[f]),M.push(Pt[f])):139===f?(4===b?(_=e(u,p,h),O=e(n,p,h),w=1-e(n,p,d),C=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)):(_=1-e(n,h,p),O=1-e(u,h,p),w=e(u,d,p),C=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)),M.push(Mt[f]),M.push(jt[f]),M.push(Et[f])):98===f?(0===b?(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),x=e(n,d,c),y=1-e(n,h,c)):(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),x=1-e(u,c,d),y=e(u,c,h)),M.push(Mt[f]),M.push(jt[f]),M.push(At[f])):99===f?(4===b?(_=1-e(n,h,p),O=1-e(u,h,p),k=e(u,d,p),w=e(n,d,p),x=e(n,d,c),y=1-e(n,h,c)):(_=e(u,p,h),O=e(n,p,h),k=1-e(n,p,d),w=1-e(u,p,d),x=1-e(u,c,d),y=e(u,c,h)),M.push(Mt[f]),M.push(jt[f]),M.push(Pt[f])):38===f?(0===b?(O=1-e(n,h,p),k=e(n,d,p),C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)):(O=e(u,p,h),k=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)),M.push(jt[f]),M.push(Et[f]),M.push(At[f])):39===f?(4===b?(O=1-e(n,h,p),k=e(n,d,p),C=e(n,d,c),x=e(u,d,c),y=1-e(u,h,c),m=1-e(n,h,c)):(O=e(u,p,h),k=1-e(u,p,d),C=1-e(u,c,d),x=1-e(n,c,d),y=e(n,c,h),m=e(u,c,h)),M.push(jt[f]),M.push(St[f]),M.push(At[f])):85===f&&(_=1,O=0,k=1,w=0,C=0,x=1,y=0,m=1),(y<0||y>1||m<0||m>1||_<0||_>1||k<0||k>1||C<0||C>1||x<0||x>1)&&console.log("MarchingSquaresJS-isoBands: "+f+" "+g+" "+c+","+h+","+p+","+d+" "+b+" "+y+" "+m+" "+_+" "+O+" "+k+" "+w+" "+C+" "+x),a.cells[s][l]={cval:f,cval_real:g,flipped:b,topleft:y,topright:m,righttop:_,rightbottom:O,bottomright:k,bottomleft:w,leftbottom:C,lefttop:x,edges:M}}}}}return a}function o(t){for(var e=[],n=t.rows,r=t.cols,o=[],a=0;a<n;a++)for(var l=0;l<r;l++)if(void 0!==t.cells[a][l]&&t.cells[a][l].edges.length>0){var f=t.cells[a][l],c=u(f),h=null,p=l,d=a;null!==c&&o.push([c.p[0]+p,c.p[1]+d]);do{if(null===(h=s(t.cells[d][p],c.x,c.y,c.o)))break;if(o.push([h.p[0]+p,h.p[1]+d]),p+=h.x,d+=h.y,c=h,d<0||d>=n||p<0||p>=r||void 0===t.cells[d][p]){p-=h.x,d-=h.y;var g=i(t,p,d,h.x,h.y,h.o);if(null===g)break;g.path.forEach(function(t){o.push(t)}),p=g.i,d=g.j,c=g}}while(void 0!==t.cells[d][p]&&t.cells[d][p].edges.length>0);e.push(o),o=[],t.cells[a][l].edges.length>0&&l--}return e}function i(t,e,n,r,o,i){for(var a=t.cells[n][e],u=a.cval_real,s=e+r,l=n+o,f=[],c=!1;!c;){if(void 0===t.cells[l]||void 0===t.cells[l][s])if(l-=o,s-=r,a=t.cells[l][s],u=a.cval_real,-1===o)if(0===i)if(u&g)f.push([s,l]),r=-1,o=0,i=0;else{if(!(u&d)){f.push([s+a.bottomright,l]),r=0,o=1,i=1,c=!0;break}f.push([s+1,l]),r=1,o=0,i=0}else{if(!(u&g)){if(u&d){f.push([s+a.bottomright,l]),r=0,o=1,i=1,c=!0;break}f.push([s+a.bottomleft,l]),r=0,o=1,i=0,c=!0;break}f.push([s,l]),r=-1,o=0,i=0}else if(1===o)if(0===i){if(!(u&p)){if(u&h){f.push([s+a.topleft,l+1]),r=0,o=-1,i=0,c=!0;break}f.push([s+a.topright,l+1]),r=0,o=-1,i=1,c=!0;break}f.push([s+1,l+1]),r=1,o=0,i=1}else f.push([s+1,l+1]),r=1,o=0,i=1;else if(-1===r)if(0===i){if(!(u&h)){if(u&g){f.push([s,l+a.leftbottom]),r=1,o=0,i=0,c=!0;break}f.push([s,l+a.lefttop]),r=1,o=0,i=1,c=!0;break}f.push([s,l+1]),r=0,o=1,i=0}else{if(!(u&h)){console.log("MarchingSquaresJS-isoBands: wtf");break}f.push([s,l+1]),r=0,o=1,i=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===i){if(!(u&d)){f.push([s+1,l+a.rightbottom]),r=-1,o=0,i=0,c=!0;break}f.push([s+1,l]),r=0,o=-1,i=1}else{if(!(u&d)){if(u&p){f.push([s+1,l+a.righttop]),r=-1,o=0,i=1;break}f.push([s+1,l+a.rightbottom]),r=-1,o=0,i=0,c=!0;break}f.push([s+1,l]),r=0,o=-1,i=1}}else if(a=t.cells[l][s],u=a.cval_real,-1===r)if(0===i)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][s])r=0,o=-1,i=1;else{if(!(u&g)){f.push([s+a.bottomright,l]),r=0,o=1,i=1,c=!0;break}f.push([s,l])}else{if(!(u&h)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+s+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][s])r=0,o=1,i=0;else{if(!(u&p)){f.push([s+a.topleft,l+1]),r=0,o=-1,i=0,c=!0;break}f.push([s+1,l+1]),r=1,o=0,i=1}}else if(-1===o){if(1!==i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][s+1])r=1,o=0,i=1;else{if(!(u&d)){f.push([s+1,l+a.righttop]),r=-1,o=0,i=1,c=!0;break}f.push([s+1,l]),r=0,o=-1,i=1}}else{if(1!==o){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][s-1])r=-1,o=0,i=0;else{if(!(u&h)){f.push([s,l+a.leftbottom]),r=1,o=0,i=0,c=!0;break}f.push([s,l+1]),r=0,o=1,i=0}}if(s+=r,l+=o,s===e&&l===n)break}return{path:f,i:s,j:l,x:r,y:o,o:i}}function a(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}function u(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&p?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&d?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&d?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&g?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&p?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&d?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&d?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&g?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&d?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&g?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&g?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&h?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&d?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&g?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&g?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&h?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&d?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&h?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&g?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&h?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&h?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&p?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&h?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&p?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function s(t,e,n,r){var o,i,u,s,l,f=t.cval;switch(e){case-1:switch(r){case 0:o=jt[f],u=C[f],s=M[f],l=j[f];break;default:o=Mt[f],u=_[f],s=O[f],l=x[f]}break;case 1:switch(r){case 0:o=Et[f],u=N[f],s=q[f],l=F[f];break;default:o=At[f],u=B[f],s=D[f],l=L[f]}break;default:switch(n){case-1:switch(r){case 0:o=It[f],u=b[f],s=v[f],l=y[f];break;default:o=Tt[f],u=m[f],s=w[f],l=k[f]}break;case 1:switch(r){case 0:o=Pt[f],u=S[f],s=P[f],l=E[f];break;default:o=St[f],u=A[f],s=I[f],l=T[f]}}}if(i=t.edges.indexOf(o),void 0===t.edges[i])return null;switch(a(t,i),f=t.cval_real,o){case 0:f&p?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:f&d?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:f&d?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:f&g?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:f&p?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:f&d?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:f&d?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:f&g?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:f&d?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:f&g?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:f&g?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:f&h?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:f&d?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:f&g?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:f&g?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:f&h?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:f&d?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:f&h?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:f&g?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:f&h?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:f&h?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:f&p?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:f&h?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:f&p?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==u&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+u+" "+s+" "+l)),{p:[e,n],x:u,y:s,o:l}}function l(t){var e=[],r=0;return t.cells.forEach(function(t,o){t.forEach(function(t,i){if(void 0!==t){var a=Bt[t.cval](t);"object"==typeof a&&n(a)?"object"==typeof a[0]&&n(a[0])?"object"==typeof a[0][0]&&n(a[0][0])?a.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=o}),e[r++]=t}):(a.forEach(function(t){t[0]+=i,t[1]+=o}),e[r++]=a):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}var f={successCallback:null,verbose:!1,polygons:!1},c={},h=64,p=16,d=4,g=1,b=[],v=[],y=[],m=[],w=[],k=[],_=[],O=[],x=[],C=[],M=[],j=[],S=[],P=[],E=[],A=[],I=[],T=[],B=[],D=[],L=[],N=[],q=[],F=[];_[85]=C[85]=-1,O[85]=M[85]=0,x[85]=j[85]=1,B[85]=N[85]=1,D[85]=q[85]=0,L[85]=F[85]=1,b[85]=m[85]=0,v[85]=w[85]=-1,y[85]=E[85]=0,A[85]=S[85]=0,I[85]=P[85]=1,k[85]=T[85]=1,N[1]=N[169]=0,q[1]=q[169]=-1,F[1]=F[169]=0,S[1]=S[169]=-1,P[1]=P[169]=0,E[1]=E[169]=0,C[4]=C[166]=0,M[4]=M[166]=-1,j[4]=j[166]=1,A[4]=A[166]=1,I[4]=I[166]=0,T[4]=T[166]=0,_[16]=_[154]=0,O[16]=O[154]=1,x[16]=x[154]=1,m[16]=m[154]=1,w[16]=w[154]=0,k[16]=k[154]=1,B[64]=B[106]=0,D[64]=D[106]=1,L[64]=L[106]=0,b[64]=b[106]=-1,v[64]=v[106]=0,y[64]=y[106]=1,B[2]=B[168]=0,D[2]=D[168]=-1,L[2]=L[168]=1,N[2]=N[168]=0,q[2]=q[168]=-1,F[2]=F[168]=0,S[2]=S[168]=-1,P[2]=P[168]=0,E[2]=E[168]=0,A[2]=A[168]=-1,I[2]=I[168]=0,T[2]=T[168]=1,_[8]=_[162]=0,O[8]=O[162]=-1,x[8]=x[162]=0,C[8]=C[162]=0,M[8]=M[162]=-1,j[8]=j[162]=1,S[8]=S[162]=1,P[8]=P[162]=0,E[8]=E[162]=1,A[8]=A[162]=1,I[8]=I[162]=0,T[8]=T[162]=0,_[32]=_[138]=0,O[32]=O[138]=1,x[32]=x[138]=1,C[32]=C[138]=0,M[32]=M[138]=1,j[32]=j[138]=0,b[32]=b[138]=1,v[32]=v[138]=0,y[32]=y[138]=0,m[32]=m[138]=1,w[32]=w[138]=0,k[32]=k[138]=1,N[128]=N[42]=0,q[128]=q[42]=1,F[128]=F[42]=1,B[128]=B[42]=0,D[128]=D[42]=1,L[128]=L[42]=0,b[128]=b[42]=-1,v[128]=v[42]=0,y[128]=y[42]=1,m[128]=m[42]=-1,w[128]=w[42]=0,k[128]=k[42]=0,C[5]=C[165]=-1,M[5]=M[165]=0,j[5]=j[165]=0,N[5]=N[165]=1,q[5]=q[165]=0,F[5]=F[165]=0,A[20]=A[150]=0,I[20]=I[150]=1,T[20]=T[150]=1,m[20]=m[150]=0,w[20]=w[150]=-1,k[20]=k[150]=1,_[80]=_[90]=-1,O[80]=O[90]=0,x[80]=x[90]=1,B[80]=B[90]=1,D[80]=D[90]=0,L[80]=L[90]=1,S[65]=S[105]=0,P[65]=P[105]=1,E[65]=E[105]=0,b[65]=b[105]=0,v[65]=v[105]=-1,y[65]=y[105]=0,_[160]=_[10]=-1,O[160]=O[10]=0,x[160]=x[10]=1,C[160]=C[10]=-1,M[160]=M[10]=0,j[160]=j[10]=0,N[160]=N[10]=1,q[160]=q[10]=0,F[160]=F[10]=0,B[160]=B[10]=1,D[160]=D[10]=0,L[160]=L[10]=1,A[130]=A[40]=0,I[130]=I[40]=1,T[130]=T[40]=1,S[130]=S[40]=0,P[130]=P[40]=1,E[130]=E[40]=0,b[130]=b[40]=0,v[130]=v[40]=-1,y[130]=y[40]=0,m[130]=m[40]=0,w[130]=w[40]=-1,k[130]=k[40]=1,C[37]=C[133]=0,M[37]=M[133]=1,j[37]=j[133]=1,N[37]=N[133]=0,q[37]=q[133]=1,F[37]=F[133]=0,b[37]=b[133]=-1,v[37]=v[133]=0,y[37]=y[133]=0,m[37]=m[133]=1,w[37]=w[133]=0,k[37]=k[133]=0,A[148]=A[22]=-1,I[148]=I[22]=0,T[148]=T[22]=0,N[148]=N[22]=0,q[148]=q[22]=-1,F[148]=F[22]=1,B[148]=B[22]=0,D[148]=D[22]=1,L[148]=L[22]=1,m[148]=m[22]=-1,w[148]=w[22]=0,k[148]=k[22]=1,_[82]=_[88]=0,O[82]=O[88]=-1,x[82]=x[88]=1,A[82]=A[88]=1,I[82]=I[88]=0,T[82]=T[88]=1,S[82]=S[88]=-1,P[82]=P[88]=0,E[82]=E[88]=1,B[82]=B[88]=0,D[82]=D[88]=-1,L[82]=L[88]=0,_[73]=_[97]=0,O[73]=O[97]=1,x[73]=x[97]=0,C[73]=C[97]=0,M[73]=M[97]=-1,j[73]=j[97]=0,S[73]=S[97]=1,P[73]=P[97]=0,E[73]=E[97]=0,b[73]=b[97]=1,v[73]=v[97]=0,y[73]=y[97]=1,_[145]=_[25]=0,O[145]=O[25]=-1,x[145]=x[25]=0,S[145]=S[25]=1,P[145]=P[25]=0,E[145]=E[25]=1,N[145]=N[25]=0,q[145]=q[25]=1,F[145]=F[25]=1,m[145]=m[25]=-1,w[145]=w[25]=0,k[145]=k[25]=0,C[70]=C[100]=0,M[70]=M[100]=1,j[70]=j[100]=0,A[70]=A[100]=-1,I[70]=I[100]=0,T[70]=T[100]=1,B[70]=B[100]=0,D[70]=D[100]=-1;L[70]=L[100]=1,b[70]=b[100]=1,v[70]=v[100]=0,y[70]=y[100]=0,C[101]=C[69]=0,M[101]=M[69]=1,j[101]=j[69]=0,b[101]=b[69]=1,v[101]=v[69]=0,y[101]=y[69]=0,N[149]=N[21]=0,q[149]=q[21]=1,F[149]=F[21]=1,m[149]=m[21]=-1,w[149]=w[21]=0,k[149]=k[21]=0,A[86]=A[84]=-1,I[86]=I[84]=0,T[86]=T[84]=1,B[86]=B[84]=0,D[86]=D[84]=-1,L[86]=L[84]=1,_[89]=_[81]=0,O[89]=O[81]=-1,x[89]=x[81]=0,S[89]=S[81]=1,P[89]=P[81]=0,E[89]=E[81]=1,_[96]=_[74]=0,O[96]=O[74]=1,x[96]=x[74]=0,C[96]=C[74]=-1,M[96]=M[74]=0,j[96]=j[74]=1,B[96]=B[74]=1,D[96]=D[74]=0,L[96]=L[74]=0,b[96]=b[74]=1,v[96]=v[74]=0,y[96]=y[74]=1,_[24]=_[146]=0,O[24]=O[146]=-1,x[24]=x[146]=1,A[24]=A[146]=1,I[24]=I[146]=0,T[24]=T[146]=1,S[24]=S[146]=0,P[24]=P[146]=1,E[24]=E[146]=1,m[24]=m[146]=0,w[24]=w[146]=-1,k[24]=k[146]=0,C[6]=C[164]=-1,M[6]=M[164]=0,j[6]=j[164]=1,A[6]=A[164]=-1,I[6]=I[164]=0,T[6]=T[164]=0,N[6]=N[164]=0,q[6]=q[164]=-1,F[6]=F[164]=1,B[6]=B[164]=1,D[6]=D[164]=0,L[6]=L[164]=0,S[129]=S[41]=0,P[129]=P[41]=1,E[129]=E[41]=1,N[129]=N[41]=0,q[129]=q[41]=1,F[129]=F[41]=0,b[129]=b[41]=-1,v[129]=v[41]=0,y[129]=y[41]=0,m[129]=m[41]=0,w[129]=w[41]=-1,k[129]=k[41]=0,A[66]=A[104]=0,I[66]=I[104]=1,T[66]=T[104]=0,S[66]=S[104]=-1,P[66]=P[104]=0,E[66]=E[104]=1,B[66]=B[104]=0,D[66]=D[104]=-1,L[66]=L[104]=0,b[66]=b[104]=0,v[66]=v[104]=-1,y[66]=y[104]=1,_[144]=_[26]=-1,O[144]=O[26]=0,x[144]=x[26]=0,N[144]=N[26]=1,q[144]=q[26]=0,F[144]=F[26]=1,B[144]=B[26]=0,D[144]=D[26]=1,L[144]=L[26]=1,m[144]=m[26]=-1,w[144]=w[26]=0,k[144]=k[26]=1,C[36]=C[134]=0,M[36]=M[134]=1,j[36]=j[134]=1,A[36]=A[134]=0,I[36]=I[134]=1,T[36]=T[134]=0,b[36]=b[134]=0,v[36]=v[134]=-1,y[36]=y[134]=1,m[36]=m[134]=1,w[36]=w[134]=0,k[36]=k[134]=0,_[9]=_[161]=-1,O[9]=O[161]=0,x[9]=x[161]=0,C[9]=C[161]=0,M[9]=M[161]=-1,j[9]=j[161]=0,S[9]=S[161]=1,P[9]=P[161]=0,E[9]=E[161]=0,N[9]=N[161]=1,q[9]=q[161]=0,F[9]=F[161]=1,_[136]=0,O[136]=1,x[136]=1,C[136]=0,M[136]=1,j[136]=0,A[136]=-1,I[136]=0,T[136]=1,S[136]=-1,P[136]=0,E[136]=0,N[136]=0,q[136]=-1,F[136]=0,B[136]=0,D[136]=-1,L[136]=1,b[136]=1,v[136]=0,y[136]=0,m[136]=1,w[136]=0,k[136]=1,_[34]=0,O[34]=-1,x[34]=0,C[34]=0,M[34]=-1,j[34]=1,A[34]=1,I[34]=0,T[34]=0,S[34]=1,P[34]=0,E[34]=1,N[34]=0,q[34]=1,F[34]=1,B[34]=0,D[34]=1,L[34]=0,b[34]=-1,v[34]=0,y[34]=1,m[34]=-1,w[34]=0,k[34]=0,_[35]=0,O[35]=1,x[35]=1,C[35]=0,M[35]=-1,j[35]=1,A[35]=1,I[35]=0,T[35]=0,S[35]=-1,P[35]=0,E[35]=0,N[35]=0,q[35]=-1,F[35]=0,B[35]=0,D[35]=1,L[35]=0,b[35]=-1,v[35]=0,y[35]=1,m[35]=1,w[35]=0,k[35]=1,_[153]=0,O[153]=1,x[153]=1,S[153]=-1;P[153]=0,E[153]=0,N[153]=0,q[153]=-1,F[153]=0,m[153]=1,w[153]=0,k[153]=1,C[102]=0,M[102]=-1,j[102]=1,A[102]=1,I[102]=0,T[102]=0,B[102]=0,D[102]=1,L[102]=0,b[102]=-1,v[102]=0,y[102]=1,_[155]=0,O[155]=-1,x[155]=0,S[155]=1,P[155]=0,E[155]=1,N[155]=0,q[155]=1,F[155]=1,m[155]=-1,w[155]=0,k[155]=0,C[103]=0,M[103]=1,j[103]=0,A[103]=-1,I[103]=0,T[103]=1,B[103]=0,D[103]=-1,L[103]=1,b[103]=1,v[103]=0,y[103]=0,_[152]=0,O[152]=1,x[152]=1,A[152]=-1,I[152]=0,T[152]=1,S[152]=-1,P[152]=0,E[152]=0,N[152]=0,q[152]=-1,F[152]=0,B[152]=0,D[152]=-1,L[152]=1,m[152]=1,w[152]=0,k[152]=1,_[156]=0,O[156]=-1,x[156]=1,A[156]=1,I[156]=0,T[156]=1,S[156]=-1,P[156]=0,E[156]=0,N[156]=0,q[156]=-1,F[156]=0,B[156]=0,D[156]=1,L[156]=1,m[156]=-1,w[156]=0,k[156]=1,_[137]=0,O[137]=1,x[137]=1,C[137]=0,M[137]=1,j[137]=0,S[137]=-1,P[137]=0,E[137]=0,N[137]=0,q[137]=-1,F[137]=0,b[137]=1,v[137]=0,y[137]=0,m[137]=1,w[137]=0,k[137]=1,_[139]=0,O[139]=1,x[139]=1,C[139]=0,M[139]=-1,j[139]=0,S[139]=1,P[139]=0,E[139]=0,N[139]=0,q[139]=1,F[139]=0,b[139]=-1,v[139]=0,y[139]=0,m[139]=1,w[139]=0,k[139]=1,_[98]=0,O[98]=-1,x[98]=0,C[98]=0,M[98]=-1,j[98]=1,A[98]=1,I[98]=0,T[98]=0,S[98]=1,P[98]=0,E[98]=1,B[98]=0,D[98]=1,L[98]=0,b[98]=-1,v[98]=0,y[98]=1,_[99]=0,O[99]=1,x[99]=0,C[99]=0,M[99]=-1,j[99]=1,A[99]=1,I[99]=0,T[99]=0,S[99]=-1,P[99]=0,E[99]=1,B[99]=0,D[99]=-1,L[99]=0,b[99]=1,v[99]=0,y[99]=1,C[38]=0,M[38]=-1,j[38]=1,A[38]=1,I[38]=0,T[38]=0,N[38]=0,q[38]=1,F[38]=1,B[38]=0,D[38]=1,L[38]=0,b[38]=-1,v[38]=0,y[38]=1,m[38]=-1,w[38]=0,k[38]=0,C[39]=0,M[39]=1,j[39]=1,A[39]=-1,I[39]=0,T[39]=0,N[39]=0,q[39]=-1,F[39]=1,B[39]=0,D[39]=1,L[39]=0,b[39]=-1,v[39]=0,y[39]=1,m[39]=1,w[39]=0,k[39]=0;var J=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},R=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},z=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},W=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},G=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},V=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},K=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},X=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Y=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},U=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},H=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Q=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Z=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},$=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},tt=function(){return[[0,0],[0,1],[1,1],[1,0]]},et=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},nt=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},rt=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ot=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},it=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},at=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ut=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},st=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},lt=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ft=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ct=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ht=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},pt=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},dt=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},gt=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},bt=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},vt=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},yt=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},mt=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},wt=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},kt=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_t=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ot=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},xt=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ct=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Mt=[],jt=[],St=[],Pt=[],Et=[],At=[],It=[],Tt=[];Pt[1]=Et[1]=18,Pt[169]=Et[169]=18,St[4]=jt[4]=12,St[166]=jt[166]=12,Mt[16]=Tt[16]=4,Mt[154]=Tt[154]=4,At[64]=It[64]=22,At[106]=It[106]=22,St[2]=At[2]=17,Pt[2]=Et[2]=18,St[168]=At[168]=17,Pt[168]=Et[168]=18,Mt[8]=Pt[8]=9,jt[8]=St[8]=12,Mt[162]=Pt[162]=9,jt[162]=St[162]=12,Mt[32]=Tt[32]=4,jt[32]=It[32]=1,Mt[138]=Tt[138]=4,jt[138]=It[138]=1,Et[128]=Tt[128]=21,At[128]=It[128]=22,Et[42]=Tt[42]=21,At[42]=It[42]=22,jt[5]=Et[5]=14,jt[165]=Et[165]=14,St[20]=Tt[20]=6,St[150]=Tt[150]=6,Mt[80]=At[80]=11,Mt[90]=At[90]=11,Pt[65]=It[65]=3,Pt[105]=It[105]=3,Mt[160]=At[160]=11,jt[160]=Et[160]=14,Mt[10]=At[10]=11,jt[10]=Et[10]=14,St[130]=Tt[130]=6,Pt[130]=It[130]=3,St[40]=Tt[40]=6,Pt[40]=It[40]=3,jt[101]=It[101]=1,jt[69]=It[69]=1,Et[149]=Tt[149]=21,Et[21]=Tt[21]=21,St[86]=At[86]=17,St[84]=At[84]=17,Mt[89]=Pt[89]=9,Mt[81]=Pt[81]=9,Mt[96]=It[96]=0,jt[96]=At[96]=15,Mt[74]=It[74]=0,jt[74]=At[74]=15,Mt[24]=St[24]=8,Pt[24]=Tt[24]=7,Mt[146]=St[146]=8,Pt[146]=Tt[146]=7,jt[6]=At[6]=15,St[6]=Et[6]=16,jt[164]=At[164]=15,St[164]=Et[164]=16,Pt[129]=Tt[129]=7,Et[129]=It[129]=20,Pt[41]=Tt[41]=7,Et[41]=It[41]=20,St[66]=It[66]=2,Pt[66]=At[66]=19,St[104]=It[104]=2,Pt[104]=At[104]=19,Mt[144]=Et[144]=10,At[144]=Tt[144]=23,Mt[26]=Et[26]=10,At[26]=Tt[26]=23,jt[36]=Tt[36]=5,St[36]=It[36]=2,jt[134]=Tt[134]=5,St[134]=It[134]=2,Mt[9]=Et[9]=10,jt[9]=Pt[9]=13,Mt[161]=Et[161]=10,jt[161]=Pt[161]=13,jt[37]=Tt[37]=5,Et[37]=It[37]=20,jt[133]=Tt[133]=5,Et[133]=It[133]=20,St[148]=Et[148]=16,At[148]=Tt[148]=23,St[22]=Et[22]=16,At[22]=Tt[22]=23,Mt[82]=St[82]=8,Pt[82]=At[82]=19,Mt[88]=St[88]=8,Pt[88]=At[88]=19,Mt[73]=It[73]=0,jt[73]=Pt[73]=13,Mt[97]=It[97]=0,jt[97]=Pt[97]=13,Mt[145]=Pt[145]=9,Et[145]=Tt[145]=21,Mt[25]=Pt[25]=9,Et[25]=Tt[25]=21,jt[70]=It[70]=1,St[70]=At[70]=17,jt[100]=It[100]=1,St[100]=At[100]=17,Mt[34]=Pt[34]=9,jt[34]=St[34]=12,Et[34]=Tt[34]=21,At[34]=It[34]=22,Mt[136]=Tt[136]=4,jt[136]=It[136]=1,St[136]=At[136]=17,Pt[136]=Et[136]=18,Mt[35]=Tt[35]=4,jt[35]=St[35]=12,Pt[35]=Et[35]=18,At[35]=It[35]=22,Mt[153]=Tt[153]=4,Pt[153]=Et[153]=18,jt[102]=St[102]=12,At[102]=It[102]=22,Mt[155]=Pt[155]=9,Et[155]=Tt[155]=23,jt[103]=It[103]=1,St[103]=At[103]=17,Mt[152]=Tt[152]=4,St[152]=At[152]=17,Pt[152]=Et[152]=18,Mt[156]=St[156]=8,Pt[156]=Et[156]=18,At[156]=Tt[156]=23,Mt[137]=Tt[137]=4,jt[137]=It[137]=1,Pt[137]=Et[137]=18,Mt[139]=Tt[139]=4,jt[139]=Pt[139]=13,Et[139]=It[139]=20,Mt[98]=Pt[98]=9,jt[98]=St[98]=12,At[98]=It[98]=22,Mt[99]=It[99]=0,jt[99]=St[99]=12,Pt[99]=At[99]=19,jt[38]=St[38]=12,Et[38]=Tt[38]=21,At[38]=It[38]=22,jt[39]=Tt[39]=5,St[39]=Et[39]=16,At[39]=It[39]=22;var Bt=[];return Bt[1]=Bt[169]=J,Bt[4]=Bt[166]=R,Bt[16]=Bt[154]=z,Bt[64]=Bt[106]=W,Bt[168]=Bt[2]=G,Bt[162]=Bt[8]=V,Bt[138]=Bt[32]=K,Bt[42]=Bt[128]=X,Bt[5]=Bt[165]=Y,Bt[20]=Bt[150]=U,Bt[80]=Bt[90]=H,Bt[65]=Bt[105]=Q,Bt[160]=Bt[10]=Z,Bt[130]=Bt[40]=$,Bt[85]=tt,Bt[101]=Bt[69]=et,Bt[149]=Bt[21]=nt,Bt[86]=Bt[84]=rt,Bt[89]=Bt[81]=ot,Bt[96]=Bt[74]=it,Bt[24]=Bt[146]=at,Bt[6]=Bt[164]=ut,Bt[129]=Bt[41]=st,Bt[66]=Bt[104]=lt,Bt[144]=Bt[26]=ft,Bt[36]=Bt[134]=ct,Bt[9]=Bt[161]=ht,Bt[37]=Bt[133]=pt,Bt[148]=Bt[22]=dt,Bt[82]=Bt[88]=gt,Bt[73]=Bt[97]=bt,Bt[145]=Bt[25]=vt,Bt[70]=Bt[100]=yt,Bt[34]=function(t){return[X(t),V(t)]},Bt[35]=mt,Bt[136]=function(t){return[K(t),G(t)]},Bt[153]=function(t){return[z(t),J(t)]},Bt[102]=function(t){return[R(t),W(t)]},Bt[155]=wt,Bt[103]=kt,Bt[152]=function(t){return[z(t),G(t)]},Bt[156]=_t,Bt[137]=function(t){return[K(t),J(t)]},Bt[139]=Ot,Bt[98]=function(t){return[V(t),W(t)]},Bt[99]=xt,Bt[38]=function(t){return[R(t),X(t)]},Bt[39]=Ct,t})},function(t,e,n){var r,o;/*!
* @license GNU Affero General Public License.
* Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
* v. 1.2.0
* https://github.com/RaumZeit/MarchingSquares.js
*/
!function(n,i){r=[],void 0!==(o=function(){return{isoContours:i()}}.apply(e,r))&&(t.exports=o)}(0,function(){function t(t,e,r){r=r||{};for(var o=Object.keys(l),i=0;i<o.length;i++){var a=o[i],s=r[a];s=void 0!==s&&null!==s?s:l[a],f[a]=s}f.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var c=u(n(t,e));return"function"==typeof f.successCallback&&f.successCallback(c),c}function e(t,e,n){return(t-e)/(n-e)}function n(t,n){for(var r=t.length-1,o=t[0].length-1,i={rows:r,cols:o,cells:[]},a=0;a<r;++a){i.cells[a]=[];for(var u=0;u<o;++u){var s=0,l=t[a+1][u],f=t[a+1][u+1],c=t[a][u+1],h=t[a][u];if(!(isNaN(l)||isNaN(f)||isNaN(c)||isNaN(h))){s|=l>=n?8:0,s|=f>=n?4:0,s|=c>=n?2:0,s|=h>=n?1:0;var p=!1;if(5===s||10===s){var d=(l+f+c+h)/4;5===s&&d<n?(s=10,p=!0):10===s&&d<n&&(s=5,p=!0)}if(0!=s&&15!=s){var g,b,v,y;g=b=v=y=.5,1===s?(v=1-e(n,l,h),b=1-e(n,c,h)):2===s?(b=e(n,h,c),y=1-e(n,f,c)):3===s?(v=1-e(n,l,h),y=1-e(n,f,c)):4===s?(g=e(n,l,f),y=e(n,c,f)):5===s?(g=e(n,l,f),y=e(n,c,f),b=1-e(n,c,h),v=1-e(n,l,h)):6===s?(b=e(n,h,c),g=e(n,l,f)):7===s?(v=1-e(n,l,h),g=e(n,l,f)):8===s?(v=e(n,h,l),g=1-e(n,f,l)):9===s?(b=1-e(n,c,h),g=1-e(n,f,l)):10===s?(g=1-e(n,f,l),y=1-e(n,f,c),b=e(n,h,c),v=e(n,h,l)):11===s?(g=1-e(n,f,l),y=1-e(n,f,c)):12===s?(v=e(n,h,l),y=e(n,c,f)):13===s?(b=1-e(n,c,h),y=e(n,c,f)):14===s?(v=e(n,h,l),b=e(n,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[a][u]={cval:s,flipped:p,top:g,right:y,bottom:b,left:v}}}}}return i}function r(t){return 5===t.cval||10===t.cval}function o(t){return 0===t.cval||15===t.cval}function i(t){o(t)||5===t.cval||10===t.cval||(t.cval=15)}function a(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function u(t){var e=[],n=0;t.rows,t.cols;return t.cells.forEach(function(i,a){i.forEach(function(i,u){if(void 0!==i&&!r(i)&&!o(i)){var l=s(t.cells,a,u),f=!1;if("mergeable"===l.info)for(var c=l.path[l.path.length-1][0],h=l.path[l.path.length-1][1],p=n-1;p>=0;p--)if(Math.abs(e[p][0][0]-c)<=1e-7&&Math.abs(e[p][0][1]-h)<=1e-7){for(var d=l.path.length-2;d>=0;--d)e[p].unshift(l.path[d]);f=!0;break}f||(e[n++]=l.path)}})}),e}function s(t,e,n){var r,o,u,s=t.length,l=[],f=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],p=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],d=(t[e][n],t[e][n]),g=d.cval,u=h[g],b=a(d,u);l.push([n+b[0],e+b[1]]),u=p[g],b=a(d,u),l.push([n+b[0],e+b[1]]),i(d);for(var v=n+f[g],y=e+c[g],m=g;v>=0&&y>=0&&y<s&&(v!=n||y!=e)&&void 0!==(d=t[y][v]);){if(0===(g=d.cval)||15===g)return{path:l,info:"mergeable"};u=p[g],r=f[g],o=c[g],5!==g&&10!==g||(5===g?d.flipped?-1===c[m]?(u="left",r=-1,o=0):(u="right",r=1,o=0):-1===f[m]&&(u="bottom",r=0,o=-1):10===g&&(d.flipped?-1===f[m]?(u="top",r=0,o=1):(u="bottom",r=0,o=-1):1===c[m]&&(u="left",r=-1,o=0))),b=a(d,u),l.push([v+b[0],y+b[1]]),i(d),v+=r,y+=o,m=g}return{path:l,info:"closed"}}var l={successCallback:null,verbose:!1},f={};return t})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=r(s),f=n(3),c=r(f),h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.sigmaSquared=t,n}return a(e,t),u(e,[{key:"apply",value:function(t,e){var n=l.default.sum(t,l.default.scale(e,-1));return Math.exp(-l.default.dot(n,n)/(2*this.sigmaSquared))}}]),e}(c.default);e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=r(o),a=n(6),u=r(a),s=n(7),l=r(s),f=n(2),c=r(f),h=n(20),p=r(h),d=n(21),g=r(d),b=n(22),v=r(b);e.default={BinaryClassifier:i.default,BinaryPerceptron:u.default,BinarySVM:l.default,Classifier:c.default,KNN:p.default,SVM:g.default,Perceptron:v.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),f=n(0),c=r(f),h=n(1),p=r(h),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.training={features:[],labels:[]},n.numNeighbours=t,n}return a(e,t),u(e,[{key:"train",value:function(t,e){if(t.length!==e.length)throw new Error("Number of data points should match number of labels.");this.training.features=t,this.training.labels=e}},{key:"predict",value:function(t){var e=this;if(0===this.training.features.length)throw new Error("Model has to be trained in order to make predictions.");if(t[0].length!==this.training.features[0].length)throw new Error("Number of features of test data should match number of features of training data.");return t.map(function(t){return e.predictSample(t)})}},{key:"predictSample",value:function(t){var e=this,n=p.default.zipWithIndex(this.training.features.map(function(e){return c.default.norm(c.default.sum(t,c.default.scale(e,-1)))}));n.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:0});var r=Math.min(this.numNeighbours,n.length),o=n.slice(0,r).map(function(t){return e.training.labels[t[1]]}),i=p.default.valueCounts(o),a=-1,u=-1;return i.forEach(function(t){t[1]>a&&(a=t[1],u=t[0])}),u}}]),e}(l.default);e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(9),f=r(l),c=n(7),h=r(c),p=n(0),d=(r(p),n(1)),g=(r(d),function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.training={features:[],labels:[]},n.classifiers=[],n.numErrors=null,n.optionsUser=t,n}return a(e,t),u(e,[{key:"createClassifier",value:function(t){var e=this.training.labels.map(function(e){return e===t?1:0}),n=new h.default(this.optionsUser);return n.loadTrainingData(this.training.features,e,1),n}},{key:"train",value:function(t,n){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"train",this).call(this,t,n),this.trainBatch()}}]),e}(f.default));e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(9),f=r(l),c=n(6),h=r(c),p=n(0),d=(r(p),n(1)),g=(r(d),function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.training={features:[],labels:[]},n.classifiers=[],n.numErrors=null;var r={trackAccuracy:!0},a=Object.assign({},r,t);return n.trackAccuracy=a.trackAccuracy,n.trackAccuracy&&n.addListener("iterationCompleted",function(){return n.calculateIntermediateAccuracy()}),n}return a(e,t),u(e,[{key:"createClassifier",value:function(t){var e=this.training.labels.map(function(e){return e===t?1:0}),n=new h.default;return n.loadTrainingData(this.training.features,e,1),n.initializeWeights(),n}},{key:"train",value:function(t,n){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"train",this).call(this,t,n),this.trackAccuracy?(this.numErrors=[],this.trainIterative()):this.trainBatch()}},{key:"calculateIntermediateAccuracy",value:function(){var t=this,e=this.predict(this.training.features);this.numErrors.push(e.reduce(function(e,n,r){return e+(n!==t.training.labels[r])},0))}}]),e}(f.default));e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),i=r(o),a=n(24),u=r(a);e.default={Datapoint:i.default,Dataset:u.default}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(10),a=function(t){return t&&t.__esModule?t:{default:t}}(i),u=function(){function t(){r(this,t),this.numDimensions=0,this.numDatapoints=0,this.datapoints=[]}return o(t,[{key:"addDatapoint",value:function(t){0===this.numDatapoints&&(this.numDimensions=t.length);var e=new a.default(t);if(!this.isValidDataPoint(e))throw new Error("Invalid specification of data point.");return this.datapoints.push(e),this.numDatapoints+=1,e}},{key:"isValidDataPoint",value:function(t){return Array.isArray(t.features)&&t.features.length===this.numDimensions}},{key:"getDataPoints",value:function(){return this.datapoints}},{key:"numDataPoints",value:function(){return this.datapoints.length}},{key:"getNumDimensions",value:function(){return this.numDimensions}},{key:"getFeaturesArray",value:function(){return this.datapoints.map(function(t){return t.features})}},{key:"getLabelsArray",value:function(){return this.datapoints.map(function(t){return t.classIndex})}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(26),i=r(o),a=n(8),u=r(a),s=n(1),l=r(s);e.default={InputDevices:i.default,Random:u.default,Arrays:l.default}},function(t,e,n){"use strict";function r(t,e){var n=e.toUpperCase();return/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0]["page"+n]:t["page"+n]}Object.defineProperty(e,"__esModule",{value:!0}),e.default={getTouchCoordinate:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={LinAlg:o.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(29),i=r(o),a=n(11),u=r(a);e.default={Canvas:i.default,Datapoint:u.default}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(11),s=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(){function t(e,n){var o=this;r(this,t),this.canvas={element:e,context:e.getContext("2d")},window.addEventListener("resize",function(){return o.resize()}),this.resize(),this.options=i({continuousClick:!1,continuousClickInterval:50},n),this.listeners=new Map,this.elements=[],this.classesBoundaries={},this.weights=null,this.multiWeights=null,this.handleMouseEvents(),window.requestAnimationFrame(function(){return o.refresh()}),this.tmp={},this.tmp.predFeatures=[],this.tmp.predLabels=[]}return a(t,[{key:"addListener",value:function(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}},{key:"removeListener",value:function(t,e){var n=this.listeners.get(t);n&&this.listeners.set(t,n.filter(function(t){return!("function"==typeof t&&t===e)}))}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this.listeners.get(t);return!!o&&(o.forEach(function(t){t.apply(void 0,n)}),!0)}},{key:"addDatapoint",value:function(t){this.elements.push(new s.default(this,t))}},{key:"handleMouseEvents",value:function(){var t=this;this.options.continuousClick&&(this.mouseStatus=0,this.mouseX=0,this.mouseY=0,this.canvas.element.addEventListener("mousedown",function(){t.mouseStatus=1,t.continuousClickIntervalId=setInterval(function(){return t.click()},t.options.continuousClickInterval)}),document.addEventListener("mouseup",function(){t.mouseStatus=0,clearInterval(t.continuousClickIntervalId)}),document.addEventListener("mousemove",function(e){t.mouseX=e.pageX,t.mouseY=e.pageY})),this.canvas.element.addEventListener("mousedown",function(e){t.click(e.pageX,e.pageY)})}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t,r=e;-1===t&&(n=this.mouseX,r=this.mouseY);var i=this.convertCanvasCoordinatesToFeatures(n,r),a=o(i,2),u=a[0],s=a[1];this.emit("click",u,s)}},{key:"clear",value:function(){this.canvas.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"resize",value:function(){this.canvas.element.style.width="100%",this.canvas.element.style.height="100%",this.canvas.element.width=this.canvas.element.offsetWidth*window.devicePixelRatio,this.canvas.element.height=this.canvas.element.offsetHeight*window.devicePixelRatio,this.canvas.width=this.canvas.element.offsetWidth,this.canvas.height=this.canvas.element.offsetHeight,this.canvas.context.scale(window.devicePixelRatio,window.devicePixelRatio)}},{key:"redraw",value:function(){var t=this;this.clear(),this.drawGrid(),this.drawAxes(),this.elements.forEach(function(t){t.draw()}),this.drawClassBoundaries(),window.requestAnimationFrame(function(){return t.refresh()})}},{key:"refresh",value:function(){this.elements.forEach(function(t){t.update()}),this.redraw()}},{key:"setWeightVector",value:function(t){this.weights=t}},{key:"setClassBoundaries",value:function(t){this.classesBoundaries=t}},{key:"drawWeightVector",value:function(t){if(t){var e=void 0,n=void 0,r=void 0,o=void 0;Math.abs(t[1])>Math.abs(t[2])?(e=-1,n=-(t[0]-t[1])/t[2],r=1,o=-(t[0]+t[1])/t[2]):(n=-1,e=-(t[0]-t[2])/t[1],o=1,r=-(t[0]+t[2])/t[1]);var i=this.canvas,a=i.context;e=(e+1)/2,n=1-(n+1)/2,r=(r+1)/2,o=1-(o+1)/2,a.beginPath(),a.moveTo(e*i.width,n*i.height),a.lineTo(r*i.width,o*i.height),a.lineWidth=3,a.stroke()}}},{key:"convertCanvasCoordinatesToFeatures",value:function(t,e){var n=this.canvas.element,r=n.getBoundingClientRect(),o=n.ownerDocument.defaultView,i=(t-r.left+o.pageXOffset)/this.canvas.width,a=(e-r.top+o.pageYOffset)/this.canvas.height;return i=2*i-1,a=1-2*a,[i,a]}},{key:"convertFeaturesToCanvasCoordinates",value:function(t,e){return[(t+1)/2*this.canvas.width,-(e-1)/2*this.canvas.height]}},{key:"drawGrid",value:function(){for(var t=this.canvas,e=t.context,n=1;n<10;n+=1)e.beginPath(),e.moveTo(0,n/10*t.height),e.lineTo(t.width,n/10*t.height),e.lineWidth=1,e.strokeStyle="#EAEAEA",e.stroke(),e.beginPath(),e.moveTo(n/10*t.width,0),e.lineTo(n/10*t.width,t.height),e.lineWidth=1,e.strokeStyle="#EAEAEA",e.stroke()}},{key:"drawAxes",value:function(){var t=this.canvas,e=t.context,n=this.convertFeaturesToCanvasCoordinates(0,0),r=o(n,2),i=r[0],a=r[1];e.beginPath(),e.moveTo(0,a),e.lineTo(t.width,a),e.lineWidth=2,e.strokeStyle="#CCC",e.stroke(),e.beginPath(),e.moveTo(i,0),e.lineTo(i,t.height),e.lineWidth=2,e.strokeStyle="#CCC",e.stroke()}},{key:"drawClassBoundaries",value:function(){var t=this,e=this.canvas.context;Object.keys(this.classesBoundaries).forEach(function(n){var r=t.classesBoundaries[n];e.beginPath(),r.forEach(function(r){var i=!0;r.forEach(function(r){var a=t.convertFeaturesToCanvasCoordinates(r[0],r[1]),u=o(a,2),s=u[0],l=u[1];i?(i=!1,e.moveTo(s,l)):e.lineTo(s,l),1!==Math.abs(r[0])&&1!==Math.abs(r[1])&&(e.fillStyle=t.getClassColor(n),e.fillStyle="#000",e.globalAlpha=.25,e.globalAlpha=1)}),e.closePath()}),e.fillStyle="#5DA5DA",e.strokeStyle="#5DA5DA",e.fillStyle=t.getClassColor(n),e.strokeStyle=t.getClassColor(n),e.globalAlpha=.5,e.fill(),e.globalAlpha=1})}},{key:"getClassColor",value:function(t){var e=this.getColors();return e[Object.keys(e)[parseInt(t,10)]]}},{key:"getColors",value:function(){return{blue:"#5DA5DA",orange:"#FAA43A",green:"#60BD68",pink:"#F17CB0",brown:"#B2912F",purple:"#B276B2",yellow:"#DECF3F",red:"#F15854",gray:"#4D4D4D"}}}]),t}();e.default=l}]);